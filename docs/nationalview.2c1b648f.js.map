{"version":3,"sources":["nationalview.js"],"names":["countydata","countydata2","years","options","config","init","view","tooltip","vegaTooltip","Handler","call","renderer","vl","register","vega","vegaLite","d3","csv","personalincome","then","data2","forEach","d","push","personalincome2","data3","e","drawAnnualIncomeCounty","sel","selectSingle","map","markGeoshape","stroke","strokeWidth","data","topojson","feature","select","transform","lookup","from","key","fields","encode","color","fieldQ","scale","domain","scheme","opacity","if","value","states","fill","mesh","trend","markPoint","x","fieldO","y","average","hconcat","layer","project","projection","width","height","render","viewElement","document","getElementById","appendChild"],"mappings":"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","file":"nationalview.2c1b648f.js","sourceRoot":"..\\src","sourcesContent":["import personalincome from '../static/income_per_hour_by_county.csv'\r\nimport personalincome2 from '../static/income_per_hour_by_county2.csv'\r\n\r\n\"use strict\"; \r\nvar countydata = [];\r\nvar countydata2 = [];\r\nvar years = [2016,2017,2018,2019];\r\nconst options = {\r\n    config: {\r\n    },\r\n    init: (view) => {\r\n      view.tooltip(new vegaTooltip.Handler().call);\r\n    },\r\n    view: {\r\n      renderer: \"canvas\",\r\n    },\r\n};\r\n\r\nvl.register(vega, vegaLite, options);\r\n\r\n\r\nd3.csv(personalincome).then(function(data2) {\r\n  data2.forEach(function(d){\r\n    countydata.push(d);\r\n  })\r\n  d3.csv(personalincome2).then(function(data3){\r\n    data3.forEach(function(e){\r\n      countydata2.push(e);\r\n    })\r\n\r\n    drawAnnualIncomeCounty();\r\n  })\r\n});\r\n\r\n\r\n\r\nfunction drawAnnualIncomeCounty() {  \r\n  const sel = vl.selectSingle();\r\n  //const selectyear = vl.selectSingle('Select') \r\n    //        .fields('Year')          \r\n      //      .init({Year: years[0]}) \r\n        //    .bind({Year: vl.slider(2016,2019,1)});\r\n  const map = vl.markGeoshape({stroke: 'lightgrey', strokeWidth: 0.25})\r\n        .data(vl.topojson(\"https://cdn.jsdelivr.net/npm/vega-datasets@1.31.1/data/us-10m.json\").feature('counties'))\r\n        .select(sel)\r\n        .transform(\r\n          vl.lookup('id').from(vl.data(countydata).key('GeoFips').fields(['2019','GeoName']))\r\n        )\r\n        .encode(\r\n          vl.color().fieldQ('2019').scale({domain: [0, 80],scheme: 'tealblues'}),\r\n          vl.opacity().if(sel,vl.value(1)).value(0.5),\r\n          vl.tooltip(['2019','GeoName'])\r\n        );\r\n  \r\n  const states = vl.markGeoshape({fill: null, stroke: 'white', strokeWidth: 0.5})\r\n        .data(vl.topojson(\"https://cdn.jsdelivr.net/npm/vega-datasets@1.31.1/data/us-10m.json\").mesh('states'));\r\n  const trend = vl.markPoint()\r\n                  .data(countydata2)\r\n                  //.select(sel)\r\n                  .encode(\r\n                    vl.x().fieldO('Year'),\r\n                    vl.y().average('Income'),\r\n                    //vl.opacity().if(sel,vl.value(1)).value(0),\r\n                    vl.tooltip('Income')\r\n                  )\r\n  return vl.hconcat(vl.layer(map,states).project(vl.projection('albersUsa')).width(800).height(400),trend)\r\n        .config({view: {stroke: null}})\r\n        .render()\r\n        .then(viewElement => {\r\n            document.getElementById('nv').appendChild(viewElement);\r\n        });\r\n}"]}