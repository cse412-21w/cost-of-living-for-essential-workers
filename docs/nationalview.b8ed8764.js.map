{"version":3,"sources":["nationalview.js"],"names":["countydata","statedata","options","config","init","view","tooltip","vegaTooltip","Handler","call","renderer","vl","register","vega","vegaLite","d3","csv","personalincome","then","data2","forEach","d","push","personalincomebystate","data3","e","drawAnnualIncomeCounty","year","markGeoshape","stroke","strokeWidth","data","topojson","feature","transform","lookup","from","key","fields","encode","color","fieldQ","scale","domain","scheme","project","projection","width","height","render","viewElement","document","getElementById","appendChild"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;;;AACA;;AACA,IAAIA,UAAU,GAAG,EAAjB;AACA,IAAIC,SAAS,GAAG,EAAhB,EACA;;AACA,IAAMC,OAAO,GAAG;AACZC,EAAAA,MAAM,EAAE,EADI;AAGZC,EAAAA,IAAI,EAAE,cAACC,IAAD,EAAU;AACdA,IAAAA,IAAI,CAACC,OAAL,CAAa,IAAIC,WAAW,CAACC,OAAhB,GAA0BC,IAAvC;AACD,GALW;AAMZJ,EAAAA,IAAI,EAAE;AACJK,IAAAA,QAAQ,EAAE;AADN;AANM,CAAhB,EAWA;AACA;AACA;AACA;;AACAC,EAAE,CAACC,QAAH,CAAYC,IAAZ,EAAkBC,QAAlB,EAA4BZ,OAA5B;AAGAa,EAAE,CAACC,GAAH,CAAOC,kCAAP,EAAuBC,IAAvB,CAA4B,UAASC,KAAT,EAAgB;AAC1CA,EAAAA,KAAK,CAACC,OAAN,CAAc,UAASC,CAAT,EAAW;AACvBrB,IAAAA,UAAU,CAACsB,IAAX,CAAgBD,CAAhB;AACD,GAFD;AAGAN,EAAAA,EAAE,CAACC,GAAH,CAAOO,iCAAP,EAA8BL,IAA9B,CAAmC,UAASM,KAAT,EAAe;AAChDA,IAAAA,KAAK,CAACJ,OAAN,CAAc,UAASK,CAAT,EAAW;AACvBxB,MAAAA,SAAS,CAACqB,IAAV,CAAeG,CAAf;AACD,KAFD;AAIAC,IAAAA,sBAAsB,CAAC,MAAD,CAAtB;AACD,GAND;AAOD,CAXD;;AAeA,SAASA,sBAAT,CAAgCC,IAAhC,EAAsC;AACpChB,EAAAA,EAAE,CAACiB,YAAH,CAAgB;AAACC,IAAAA,MAAM,EAAE,MAAT;AAAiBC,IAAAA,WAAW,EAAE;AAA9B,GAAhB,EACOC,IADP,CACYpB,EAAE,CAACqB,QAAH,CAAY,oEAAZ,EAAkFC,OAAlF,CAA0F,UAA1F,CADZ,EAEOC,SAFP,CAGQvB,EAAE,CAACwB,MAAH,CAAU,IAAV,EAAgBC,IAAhB,CAAqBzB,EAAE,CAACoB,IAAH,CAAQ/B,UAAR,EAAoBqC,GAApB,CAAwB,SAAxB,EAAmCC,MAAnC,CAA0C,CAAC,SAAD,EAAWX,IAAX,CAA1C,CAArB,CAHR,EAKOY,MALP,CAMQ5B,EAAE,CAAC6B,KAAH,GAAWC,MAAX,CAAkBd,IAAlB,EAAwBe,KAAxB,CAA8B;AAACC,IAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,GAAJ,CAAT;AAAkBC,IAAAA,MAAM,EAAE;AAA1B,GAA9B,CANR,EAOQjC,EAAE,CAACL,OAAH,CAAW,CAAC,SAAD,EAAWqB,IAAX,CAAX,CAPR,EASOkB,OATP,CASelC,EAAE,CAACmC,UAAH,CAAc,WAAd,CATf,EAUOC,KAVP,CAUa,GAVb,EAUkBC,MAVlB,CAUyB,GAVzB,EAWO7C,MAXP,CAWc;AAACE,IAAAA,IAAI,EAAE;AAACwB,MAAAA,MAAM,EAAE;AAAT;AAAP,GAXd,EAYOoB,MAZP,GAaG/B,IAbH,CAaQ,UAAAgC,WAAW,EAAI;AACnBC,IAAAA,QAAQ,CAACC,cAAT,CAAwB,IAAxB,EAA8BC,WAA9B,CAA0CH,WAA1C;AACH,GAfD;AAgBD","file":"nationalview.b8ed8764.js","sourceRoot":"../src","sourcesContent":["import personalincome from '../static/income_per_hour_by_county.csv'\nimport personalincomebystate from '../static/income_per_hour_by_state.csv'\n\"use strict\"; \nvar countydata = [];\nvar statedata = [];\n//var yearrange = ['2016','2017','2018','2019'];\nconst options = {\n    config: {\n    },\n    init: (view) => {\n      view.tooltip(new vegaTooltip.Handler().call);\n    },\n    view: {\n      renderer: \"canvas\",\n    },\n};\n\n//const selectYear = vl.selectSingle('Select') // name the selection 'Select'\n//.fields('Year')          // limit selection to the Major_Genre field\n//.init('2016') // use first genre entry as initial value\n//.bind(vl.menu(yearrange));\nvl.register(vega, vegaLite, options);\n\n\nd3.csv(personalincome).then(function(data2) {\n  data2.forEach(function(d){\n    countydata.push(d);\n  })\n  d3.csv(personalincomebystate).then(function(data3){\n    data3.forEach(function(e){\n      statedata.push(e);\n    })\n\n    drawAnnualIncomeCounty('2019');\n  })\n});\n\n\n\nfunction drawAnnualIncomeCounty(year) {\n  vl.markGeoshape({stroke: '#aaa', strokeWidth: 0.25})\n        .data(vl.topojson(\"https://cdn.jsdelivr.net/npm/vega-datasets@1.31.1/data/us-10m.json\").feature('counties'))\n        .transform(\n          vl.lookup('id').from(vl.data(countydata).key('GeoFips').fields(['GeoName',year])),\n        )\n        .encode(\n          vl.color().fieldQ(year).scale({domain: [0, 100],scheme: 'lighttealblue'}),\n          vl.tooltip(['GeoName',year])\n        )\n        .project(vl.projection('albersUsa'))\n        .width(890).height(500)\n        .config({view: {stroke: null}})\n        .render()\n    .then(viewElement => {\n      document.getElementById('nv').appendChild(viewElement);\n  });\n}"]}